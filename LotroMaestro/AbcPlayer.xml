<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project default="create_run_jar" name="Create Runnable Jar for Project LotroMaestro">
    <property name="output" value="${basedir}/output" />
	<property name="build" value="${basedir}/build" />
    <target name="create_run_jar">
        <jar destfile="${output}/AbcPlayer.jar" filesetmanifest="mergewithoutmain">
            <manifest>
                <attribute name="Main-Class" value="com.digero.abcplayer.AbcPlayer"/>
                <attribute name="Class-Path" value="."/>
            </manifest>
            <fileset dir="C:/Users/Ben/workspace/LotroMaestro/bin"/>
            <zipfileset excludes="META-INF/*.SF" src="C:/Users/Ben/workspace/LotroMaestro/TableLayout.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="C:/Users/Ben/workspace/LotroMaestro/gervill.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="C:/Users/Ben/workspace/LotroMaestro/WinRun4J.jar"/>
        </jar>
    	<copy file="${basedir}/LotroInstruments.sf2" todir="${output}" preservelastmodified="true"/>
    	<copy file="${build}/WinRun4J.exe" tofile="${output}/AbcPlayer.exe" overwrite="true"/>
    	<exec dir="${build}" executable="${build}/rcedit.exe" failonerror="true">
    		<arg value="/W"/>
    		<arg value="${output}/AbcPlayer.exe"/>
    		<arg value="${build}/AbcPlayer.rcedit.ini"/>
    	</exec>
    </target>
</project>
